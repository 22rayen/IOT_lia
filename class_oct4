Import paho.mqtt.client as mqtt

class IoT_Controller:
    client = None
    rules  = [ 
       {
              "condition": ("topic": "house/temp", "comparison": ">", "value": 30)
              "action": ("message": "It's too hot, turn on the AC", "topic": "room/AC", "value": "on")

      }

    def configure():
        IoT_Controller.client = mqtt.Client()
        #pass the reference to the callback function to handle incoming messages
        IoT_Controller.client.on_message = IoT_Controller.on_message 
        #must connect to the MQTT message broker at "Localhost" on port 1883   
        IoT_Controller.client.connect("localhost",1883)  
        IoT_Controller.client.subscribe("*")

    def on_message(client, userdate, message): 
        #this is where we handle the messages
        #Using try..except (exception handling)
        try:
            value = float(message.payload.decode("utf-8"))
        except: ValueError: 
            print("String")
            value = massage.payload.decode("utf-8")
        topic = message.topic
        print(topic, value) 

        if topic == "house/temp" and value > 30 

    def run(): 
        IoT.Controller.client.loop_forever()

def main():
    IoT_Controller.configure()
    IoT_Controller.run()

if __name__ == "__main__":
    main()
